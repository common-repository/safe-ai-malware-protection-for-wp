<?php
class MVSP_Load_Env {
	// Function to load environment variables from a file
	public static function load_env($filePath){
		if (file_exists($filePath)) {
			// Read the file into an array of lines
			$lines = file($filePath, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);

			foreach ($lines as $line) {
				// Skip comments
				if (strpos(trim($line), '#') === 0) {
					continue;
				}

				// Parse key-value pairs
				list($key, $value) = explode('=', $line, 2) + [NULL, NULL];

				// Set the environment variable if a key and value are present
				if ($key !== NULL && $value !== NULL) {
					putenv("$key=$value");
					$_ENV[$key] = $value;
					$_SERVER[$key] = $value;
				}
			}
		}

	}
}

MVSP_Load_Env::load_env(plugin_dir_path(dirname(__FILE__)) . '.env');