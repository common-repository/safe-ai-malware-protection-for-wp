<?php
	class MVSP_Schedular {

		public function __construct() {
			add_filter('cron_schedules', [$this, 'mvsp_cron_schedule']);
			add_action('custom_cron_hook', [$this, 'mvsp_cron_job']);
			register_activation_hook(__FILE__, [$this, 'activate_custom_cron']);
			register_deactivation_hook(__FILE__, [$this, 'deactivate_custom_cron']);
		}
		function mvsp_cron_schedule($schedules) {
			$schedules['every_five_minutes'] = array(
				'interval' => 300, // 300 seconds = 5 minutes
				'display'  => __('Every 5 Minutes'),
			);
			return $schedules;
		}

		// Schedule the cron job
		function mvsp_cron_job() {
			// Your custom code to be executed every 5 minutes
			// Replace the following line with your actual function or code
			wp_mail('mdenamulhaq6263@gmail.com', 'Cron Job Executed', 'Your cron job was executed successfully.');
		}

		// Schedule the event on plugin activation
		function activate_custom_cron() {
			if (!wp_next_scheduled('custom_cron_hook')) {
				wp_schedule_event(time(), 'every_five_minutes', 'custom_cron_hook');
			}
		}

		// Remove the scheduled event on plugin deactivation
		function deactivate_custom_cron() {
			wp_clear_scheduled_hook('custom_cron_hook');
		}
	}
	new MVSP_Schedular();